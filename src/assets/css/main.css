@import "tailwindcss";
@import "@formio/js/dist/formio.full.min.css";

@theme {
  /* Border radius */
  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  /* Colors */
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  /* Animations */
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;

  @keyframes accordion-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
    }
  }

  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }
    to {
      height: 0;
    }
  }
}

@layer base {
  /* Container centering */
  .container {
    margin-left: auto;
    margin-right: auto;
    padding-left: 2rem;
    padding-right: 2rem;
    max-width: 1400px;
  }

  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 222 47% 11%;
    --foreground: 210 40% 98%;
    --card: 217 33% 17%;
    --card-foreground: 210 40% 98%;
    --popover: 217 33% 17%;
    --popover-foreground: 210 40% 98%;
    --primary: 239 84% 67%;
    --primary-foreground: 0 0% 100%;
    --secondary: 217 33% 17%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217 33% 17%;
    --muted-foreground: 215 20% 65%;
    --accent: 270 75% 60%;
    --accent-foreground: 0 0% 100%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217 33% 25%;
    --input: 217 33% 17%;
    --ring: 239 84% 67%;
  }

  * {
    border-color: var(--color-border);
  }

  body {
    background-color: var(--color-background);
    color: var(--color-foreground);
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

/*
 * Form.io Builder Styling
 * Customizes the Form.io builder to match the application's design system
 */

/*
 * Override Tailwind's .collapse utility for Bootstrap accordion
 * Tailwind uses `visibility: collapse` which hides Form.io's accordion panels
 * Bootstrap's .collapse uses display: none/block for accordion functionality
 */
.formio-builder .collapse,
.formbuilder .collapse,
.formcomponents .collapse {
  visibility: visible !important;
}

.formio-builder .collapse:not(.show),
.formbuilder .collapse:not(.show),
.formcomponents .collapse:not(.show) {
  display: none !important;
}

.formio-builder .collapse.show,
.formbuilder .collapse.show,
.formcomponents .collapse.show {
  display: block !important;
}

/* Main builder container */
.formbuilder,
.formio-builder {
  background-color: hsl(var(--background)) !important;
  color: hsl(var(--foreground)) !important;
}

/* Bootstrap row reset for builder */
.formbuilder > .row,
.formio-builder > .row {
  display: flex !important;
  flex-wrap: nowrap !important;
  margin: 0 !important;
}

/* Sidebar column */
.formbuilder > .row > [class*="col-"]:first-child,
.formio-builder > .row > [class*="col-"]:first-child {
  width: 240px !important;
  max-width: 240px !important;
  min-width: 240px !important;
  flex: 0 0 240px !important;
  padding: 0 !important;
  background-color: hsl(var(--card)) !important;
  border-right: 1px solid hsl(var(--border)) !important;
}

/* Form area column */
.formbuilder > .row > [class*="col-"]:last-child,
.formio-builder > .row > [class*="col-"]:last-child {
  flex: 1 !important;
  width: auto !important;
  max-width: none !important;
  padding: 1rem !important;
}

/* Sidebar container */
.formcomponents {
  padding: 0.75rem !important;
  background-color: hsl(var(--card)) !important;
}

/* Sidebar search input */
.formcomponents input.form-control,
.formcomponents .builder-sidebar_search input,
.builder-sidebar_search {
  background-color: hsl(var(--input)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: var(--radius) !important;
  color: hsl(var(--foreground)) !important;
  padding: 0.5rem 0.75rem !important;
  font-size: 0.875rem !important;
  width: 100% !important;
  margin-bottom: 0.75rem !important;
}

.formcomponents input.form-control:focus {
  outline: none !important;
  border-color: hsl(var(--ring)) !important;
  box-shadow: 0 0 0 2px hsl(var(--ring) / 0.2) !important;
}

.formcomponents input.form-control::placeholder {
  color: hsl(var(--muted-foreground)) !important;
}

/* Component group panels */
.formcomponents .card,
.formcomponents .builder-group {
  background-color: transparent !important;
  border: none !important;
  margin-bottom: 0.5rem !important;
}

/* Component group headers / accordion buttons */
.formcomponents .card-header,
.formcomponents .builder-group-button {
  background-color: transparent !important;
  color: hsl(var(--muted-foreground)) !important;
  font-size: 0.7rem !important;
  font-weight: 600 !important;
  text-transform: uppercase !important;
  letter-spacing: 0.05em !important;
  padding: 0.5rem 0.25rem !important;
  border: none !important;
  cursor: pointer !important;
}

.formcomponents .card-header:hover,
.formcomponents .builder-group-button:hover {
  color: hsl(var(--foreground)) !important;
}

/* Component group body */
.formcomponents .card-body,
.formcomponents .builder-group-body {
  padding: 0 !important;
}

/* Component items in sidebar */
.formcomponents .formcomponent {
  background-color: hsl(var(--secondary)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: var(--radius) !important;
  color: hsl(var(--foreground)) !important;
  padding: 0.5rem 0.75rem !important;
  margin-bottom: 0.25rem !important;
  font-size: 0.8rem !important;
  cursor: grab !important;
  transition: all 0.15s ease !important;
  display: flex !important;
  align-items: center !important;
  gap: 0.5rem !important;
}

.formcomponents .formcomponent:hover {
  background-color: hsl(var(--accent)) !important;
  border-color: hsl(var(--ring)) !important;
}

.formcomponents .formcomponent:active {
  cursor: grabbing !important;
}

/* Component icons in sidebar */
.formcomponents .formcomponent i,
.formcomponents .formcomponent .fa,
.formcomponents .formcomponent [class*="fa-"] {
  color: hsl(var(--muted-foreground)) !important;
  font-size: 0.875rem !important;
  width: 1rem !important;
}

/* Form area / drop zone */
.formarea,
.drag-container {
  background-color: hsl(var(--background)) !important;
  min-height: 400px !important;
}

/* Drop zone placeholder */
.formio-drop-zone,
.drag-and-drop-alert,
.formio-builder .formio-drop-zone,
.formio-builder .drag-and-drop-alert {
  background-color: hsl(var(--muted) / 0.3) !important;
  border: 2px dashed hsl(var(--border)) !important;
  border-radius: var(--radius) !important;
  color: hsl(var(--muted-foreground)) !important;
  padding: 2rem !important;
  text-align: center !important;
  min-height: 100px !important;
}

/* Components in the form canvas */
.formio-builder .formio-component {
  background-color: hsl(var(--card));
  border: 1px solid hsl(var(--border));
  border-radius: var(--radius);
  margin-bottom: 0.5rem;
}

.formio-builder .formio-component:hover {
  border-color: hsl(var(--ring));
}

/* Form inputs in builder */
.formio-builder .form-control {
  background-color: hsl(var(--input));
  border: 1px solid hsl(var(--border));
  border-radius: var(--radius);
  color: hsl(var(--foreground));
}

.formio-builder .form-control:focus {
  border-color: hsl(var(--ring));
  box-shadow: 0 0 0 2px hsl(var(--ring) / 0.2);
  outline: none;
}

/* Labels */
.formio-builder label,
.formio-builder .control-label {
  color: hsl(var(--foreground));
  font-size: 0.875rem;
  font-weight: 500;
}

/* Component action buttons (edit, remove, etc.) */
.formio-builder .component-btn-group {
  background-color: hsl(var(--card));
}

.formio-builder .component-btn-group .btn {
  background-color: hsl(var(--secondary));
  border-color: hsl(var(--border));
  color: hsl(var(--foreground));
  padding: 0.25rem 0.5rem;
  font-size: 0.75rem;
}

.formio-builder .component-btn-group .btn:hover {
  background-color: hsl(var(--accent));
}

/* Buttons */
.formio-builder .btn-primary {
  background-color: hsl(var(--primary));
  border-color: hsl(var(--primary));
  color: hsl(var(--primary-foreground));
}

.formio-builder .btn-primary:hover {
  opacity: 0.9;
}

.formio-builder .btn-danger {
  background-color: hsl(var(--destructive));
  border-color: hsl(var(--destructive));
  color: hsl(var(--destructive-foreground));
}

/* Cards and panels in builder */
.formio-builder .card {
  background-color: hsl(var(--card));
  border: 1px solid hsl(var(--border));
  border-radius: var(--radius);
}

.formio-builder .card-body {
  padding: 0.5rem;
}

/*
 * Form.io Component Edit Modal Styling
 * Styles the modal that appears when editing a component's properties
 */

/* Modal backdrop */
.formio-dialog-overlay {
  background-color: rgba(0, 0, 0, 0.7) !important;
}

/* Modal container */
.formio-dialog,
.formio-dialog-content {
  background-color: hsl(var(--card)) !important;
  color: hsl(var(--foreground)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: var(--radius) !important;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5) !important;
}

/* Modal header */
.formio-dialog .formio-dialog-header,
.component-edit-header {
  background-color: hsl(var(--card)) !important;
  border-bottom: 1px solid hsl(var(--border)) !important;
  padding: 1.25rem 1.5rem !important;
}

.formio-dialog .formio-dialog-header h4,
.formio-dialog-content h4 {
  color: hsl(var(--foreground)) !important;
  font-weight: 600 !important;
  font-size: 1.125rem !important;
  margin: 0 0 0.5rem 0 !important;
}

/* Close button */
.formio-dialog .formio-dialog-close,
.formio-dialog-content .btn-close {
  color: hsl(var(--muted-foreground)) !important;
  opacity: 1 !important;
}

.formio-dialog .formio-dialog-close:hover,
.formio-dialog-content .btn-close:hover {
  color: hsl(var(--foreground)) !important;
}

/* Modal body / content area */
.formio-dialog .formio-dialog-body,
.component-edit-container {
  background-color: hsl(var(--card)) !important;
  padding: 1.5rem !important;
  max-height: 70vh;
  overflow-y: auto;
}

/* Tabs in component settings */
.formio-dialog .nav-tabs,
.component-edit-tabs .nav-tabs,
.editForm .nav-tabs {
  background-color: hsl(var(--card)) !important;
  border-bottom: 1px solid hsl(var(--border)) !important;
  padding: 0 1.5rem !important;
  margin-bottom: 0 !important;
  flex-wrap: nowrap !important;
  overflow-x: auto !important;
}

.formio-dialog .nav-tabs .nav-link,
.component-edit-tabs .nav-tabs .nav-link,
.editForm .nav-tabs .nav-link {
  color: hsl(var(--muted-foreground)) !important;
  background-color: transparent !important;
  border: none !important;
  border-bottom: 2px solid transparent !important;
  padding: 0.75rem 1rem !important;
  font-size: 0.875rem !important;
  white-space: nowrap !important;
  transition: all 0.15s ease !important;
}

.formio-dialog .nav-tabs .nav-link:hover,
.component-edit-tabs .nav-tabs .nav-link:hover,
.editForm .nav-tabs .nav-link:hover {
  color: hsl(var(--foreground)) !important;
  background-color: hsl(var(--accent)) !important;
}

.formio-dialog .nav-tabs .nav-link.active,
.component-edit-tabs .nav-tabs .nav-link.active,
.editForm .nav-tabs .nav-link.active {
  color: hsl(var(--foreground)) !important;
  background-color: transparent !important;
  border-bottom-color: hsl(var(--primary)) !important;
}

/* Tab content */
.formio-dialog .tab-content,
.component-edit-tabs .tab-content,
.editForm .tab-content {
  background-color: hsl(var(--card)) !important;
  padding: 1.5rem !important;
}

.formio-dialog .tab-pane {
  background-color: hsl(var(--card)) !important;
}

/* Form groups in modal */
.formio-dialog .form-group,
.editForm .form-group {
  margin-bottom: 1.5rem !important;
}

/* Labels in modal */
.formio-dialog label,
.formio-dialog .control-label,
.formio-dialog .col-form-label,
.editForm label {
  color: hsl(var(--foreground)) !important;
  font-size: 0.875rem !important;
  font-weight: 500 !important;
  margin-bottom: 0.5rem !important;
  display: block !important;
}

/* Help text / descriptions */
.formio-dialog .form-text,
.formio-dialog .help-block,
.editForm .form-text {
  color: hsl(var(--muted-foreground)) !important;
  font-size: 0.75rem !important;
  margin-top: 0.5rem !important;
}

/* Text inputs in modal */
.formio-dialog .form-control,
.formio-dialog input[type="text"],
.formio-dialog input[type="number"],
.formio-dialog input[type="email"],
.formio-dialog textarea,
.editForm .form-control {
  background-color: hsl(var(--input)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: var(--radius) !important;
  color: hsl(var(--foreground)) !important;
  padding: 0.625rem 0.875rem !important;
  font-size: 0.875rem !important;
  line-height: 1.5 !important;
}

.formio-dialog .form-control:focus,
.formio-dialog input:focus,
.formio-dialog textarea:focus,
.editForm .form-control:focus {
  border-color: hsl(var(--ring)) !important;
  box-shadow: 0 0 0 2px hsl(var(--ring) / 0.2) !important;
  outline: none !important;
}

.formio-dialog .form-control::placeholder,
.editForm .form-control::placeholder {
  color: hsl(var(--muted-foreground)) !important;
}

/* Select dropdowns in modal */
.formio-dialog select,
.formio-dialog .form-select,
.editForm select {
  background-color: hsl(var(--input)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: var(--radius) !important;
  color: hsl(var(--foreground)) !important;
  padding: 0.625rem 0.875rem !important;
  line-height: 1.5 !important;
}

.formio-dialog select option,
.editForm select option {
  background-color: hsl(var(--popover)) !important;
  color: hsl(var(--popover-foreground)) !important;
}

/* Checkbox and radio inputs in modal */
.formio-dialog .form-check,
.editForm .form-check {
  margin-bottom: 0.5rem !important;
}

.formio-dialog .form-check-input,
.editForm .form-check-input {
  background-color: hsl(var(--input)) !important;
  border: 1px solid hsl(var(--border)) !important;
  width: 1rem !important;
  height: 1rem !important;
}

.formio-dialog .form-check-input:checked,
.editForm .form-check-input:checked {
  background-color: hsl(var(--primary)) !important;
  border-color: hsl(var(--primary)) !important;
}

.formio-dialog .form-check-label,
.editForm .form-check-label {
  color: hsl(var(--foreground)) !important;
  font-size: 0.875rem !important;
  margin-left: 0.25rem !important;
}

/* Modal footer / buttons area */
.formio-dialog .formio-dialog-footer,
.component-edit-footer {
  background-color: hsl(var(--card)) !important;
  border-top: 1px solid hsl(var(--border)) !important;
  padding: 1rem !important;
  display: flex !important;
  justify-content: flex-end !important;
  gap: 0.5rem !important;
}

/* Buttons in modal */
.formio-dialog .btn,
.editForm .btn {
  padding: 0.5rem 1rem !important;
  font-size: 0.875rem !important;
  border-radius: var(--radius) !important;
  font-weight: 500 !important;
  transition: all 0.15s ease !important;
}

.formio-dialog .btn-primary,
.editForm .btn-primary {
  background-color: hsl(var(--primary)) !important;
  border-color: hsl(var(--primary)) !important;
  color: hsl(var(--primary-foreground)) !important;
}

.formio-dialog .btn-primary:hover,
.editForm .btn-primary:hover {
  opacity: 0.9 !important;
}

.formio-dialog .btn-secondary,
.formio-dialog .btn-default,
.editForm .btn-secondary {
  background-color: hsl(var(--secondary)) !important;
  border-color: hsl(var(--border)) !important;
  color: hsl(var(--secondary-foreground)) !important;
}

.formio-dialog .btn-secondary:hover,
.formio-dialog .btn-default:hover,
.editForm .btn-secondary:hover {
  background-color: hsl(var(--accent)) !important;
}

.formio-dialog .btn-danger,
.editForm .btn-danger {
  background-color: hsl(var(--destructive)) !important;
  border-color: hsl(var(--destructive)) !important;
  color: hsl(var(--destructive-foreground)) !important;
}

.formio-dialog .btn-danger:hover,
.editForm .btn-danger:hover {
  opacity: 0.9 !important;
}

/* Info icon / help tooltips */
.formio-dialog .fa-question-circle,
.formio-dialog .glyphicon-question-sign {
  color: hsl(var(--muted-foreground)) !important;
  cursor: help !important;
}

/* ACE Editor in modal (for JSON/code editing) */
.formio-dialog .ace_editor,
.formio-dialog .ace-jsoneditor,
.editForm .ace_editor {
  background-color: hsl(var(--input)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: var(--radius) !important;
}

.formio-dialog .ace_gutter {
  background-color: hsl(var(--muted)) !important;
  color: hsl(var(--muted-foreground)) !important;
}

.formio-dialog .ace_content {
  background-color: hsl(var(--input)) !important;
}

.formio-dialog .ace_line,
.formio-dialog .ace_text-layer {
  color: hsl(var(--foreground)) !important;
}

/* Cards inside modal */
.formio-dialog .card,
.editForm .card {
  background-color: hsl(var(--card)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: var(--radius) !important;
}

.formio-dialog .card-header,
.editForm .card-header {
  background-color: hsl(var(--muted)) !important;
  border-bottom: 1px solid hsl(var(--border)) !important;
  color: hsl(var(--foreground)) !important;
}

.formio-dialog .card-body,
.editForm .card-body {
  background-color: hsl(var(--card)) !important;
}

/* Table inside modal */
.formio-dialog table,
.editForm table {
  color: hsl(var(--foreground)) !important;
}

.formio-dialog th,
.editForm th {
  background-color: hsl(var(--muted)) !important;
  border-color: hsl(var(--border)) !important;
  color: hsl(var(--foreground)) !important;
}

.formio-dialog td,
.editForm td {
  border-color: hsl(var(--border)) !important;
}

/* Alerts in modal */
.formio-dialog .alert,
.editForm .alert {
  border-radius: var(--radius) !important;
}

.formio-dialog .alert-info,
.editForm .alert-info {
  background-color: hsl(var(--muted)) !important;
  border-color: hsl(var(--border)) !important;
  color: hsl(var(--muted-foreground)) !important;
}

.formio-dialog .alert-warning,
.editForm .alert-warning {
  background-color: hsl(45 93% 20%) !important;
  border-color: hsl(45 93% 30%) !important;
  color: hsl(45 93% 80%) !important;
}

.formio-dialog .alert-danger,
.editForm .alert-danger {
  background-color: hsl(0 62% 20%) !important;
  border-color: hsl(0 62% 30%) !important;
  color: hsl(0 62% 80%) !important;
}

/* Tooltip styling */
.tooltip,
.formio-dialog .tooltip {
  background-color: hsl(var(--popover)) !important;
  color: hsl(var(--popover-foreground)) !important;
}

.tooltip .tooltip-inner {
  background-color: hsl(var(--popover)) !important;
  color: hsl(var(--popover-foreground)) !important;
}
